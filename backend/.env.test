# Test Environment Configuration for Sandline Backend
#
# IMPORTANT: Using PRODUCTION database for tests!
# =================================================
# Tests MUST use transactions with rollback or manual cleanup
# to avoid polluting production data.
#
# Test Safety Measures:
# - All integration tests use database transactions
# - Transactions are rolled back after each test
# - Test users are real production users (created via Supabase Dashboard)
# - Cleanup utilities available in tests/common/mod.rs
#
# Setup Instructions:
# 1. Create test users in production Supabase:
#    a. Go to https://mptcysneksvjwiwqoqmt.supabase.co (Dashboard > Authentication > Users)
#    b. Add User: test-user-1@example.com (password: sandline_test_user_1)
#    c. Add User: test-user-2@example.com (password: sandline_test_user_2)
# 2. Save test user passwords as environment variables (for CI):
#    export TEST_USER_1_PASSWORD="sandline_test_user_1"
#    export TEST_USER_2_PASSWORD="sandline_test_user_2"
# 3. Get SUPABASE_ANON_KEY from Dashboard > Project Settings > API > anon public
# 4. Run tests: cargo test

# Production Database (tests use transactions with rollback)
DATABASE_URL=postgresql://postgres.mptcysneksvjwiwqoqmt:sandlinepassword-1@aws-1-eu-west-1.pooler.supabase.com:5432/postgres

# Production Supabase URL
SUPABASE_URL=https://mptcysneksvjwiwqoqmt.supabase.co

# Supabase Anonymous Key (for test user authentication)
# Get from: Dashboard > Project Settings > API > Project API keys > anon public
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1wdGN5c25la3N2andpd3FvcW10Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYyMzU4MTUsImV4cCI6MjA4MTgxMTgxNX0.EfiGKTT6IdcWVvUhi6qx5rxzgVA0I3OOYygcmJaNHI0

# Allowed CORS origins for testing
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# Mapbox token for routing tests
MAPBOX_ACCESS_TOKEN=pk.eyJ1IjoibHV4bDI1MTEiLCJhIjoiY21qaDl5OXVxMThzZTNncXplbGVyMm5iNiJ9.cvMYbkj4F2PNVqGPOYgLgA

# Server configuration
HOST=0.0.0.0
PORT=8081

# JWT Audience (Supabase standard)
SUPABASE_JWT_AUD=authenticated

# Test User Credentials
TEST_USER_1_EMAIL=test-user-1@example.com
TEST_USER_1_PASSWORD=sandline_test_user_1
TEST_USER_2_EMAIL=test-user-2@example.com
TEST_USER_2_PASSWORD=sandline_test_user_2
